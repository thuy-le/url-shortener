var mongoose = require('mongoose');
const Promise = require("promise");
const winston = require("winston");


export default function Initializer() {
    return new Promise(function (resolve: any, reject: any) {
        const interval = setInterval(() => {
            mongoose.connect('mongodb://db:27017/UrlShortener', function (err) {
                if (err) {
                    winston.info("Ping database...");
                    winston.debug(err);
                }
                if (mongoose.connection.readyState === 1) {
                    clearInterval(interval);
                    resolve("DB Connected!");
                }
            });
        }, 1000);
    });
}